#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=http://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "ProximitySensor.x3d"
# META "description" "Demonstrates use of a ProximitySensor in building a HUD"
# META "creator" "Leonard Daly and Don Brutzman"
# META "created" "15 July 2006"
# META "modified" "20 October 2019"
# META "Image" "ProximitySensorVisualization.png"
# META "reference" "http://X3dGraphics.com"
# META "reference" "https://www.web3d.org/x3d/content/examples/X3dResources.html"
# META "rights" "Copyright 2006, Daly Realism and Don Brutzman"
# META "subject" "X3D book, X3D graphics, X3D-Edit, http://www.x3dGraphics.com"
# META "identifier" "http://X3dGraphics.com/examples/X3dForWebAuthors/Chapter12EnvironmentSensorSound/ProximitySensor.x3d"
# META "generator" "X3D-Edit 3.3, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

NavigationInfo { type [ "EXAMINE" "ANY" ] } ###  Default X3D NavigationInfo

# HUD = Heads-Up Display, which stays on screen in same relative location even while user navigates
# TODO: authors should use X3D-Edit editing pane to try out the ProximitySensor Visualize capability
WorldInfo {
  title "ProximitySensor.x3d"
}
DEF HereIAm ProximitySensor {
  size 100 100 100
}
Inline {
  url [ "../KelpForestExhibit/KelpForestMain.x3d" "http://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpForestMain.x3d" "../KelpForestExhibit/KelpForestMain.wrl" "http://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpForestMain.wrl" ]
}
DEF HUD Transform {
  children [
      DEF PushBack Transform {
        translation -.8 1. -3
        children [
            Shape {
              appearance Appearance {
                material Material {
                  diffuseColor 1 1 0
                }
              }
              geometry Box {
                size 1.5 .4 .1
              }
            }
            DEF HudContents Transform {
              translation -.7 .3 .1
              children [
                  DEF TopText Transform {
                    translation 0 -.2 0
                    children [
                        Shape {
                          appearance DEF Text_app Appearance {
                            material Material {
                              diffuseColor 0 0 0
                            }
                          }
                          geometry DEF TopTextLine Text {
                            string [ "Position 0.00 0.00 10.00" ]
                            fontStyle DEF TextStyle FontStyle {
                              family [ "SANS" "SERIF"  ] 
                              justify [ "BEGIN" "BEGIN"  ] 
                              size 0.1
                            }
                          }
                        }
                    ]
                  }
                  DEF BottomText Transform {
                    translation 0 -.4 0
                    children [
                        Shape {
                          appearance USE Text_app
                          geometry DEF BottomTextLine Text {
                            string [ "Orientation: 0.000 1.000 0.000 0.00" ]
                            fontStyle USE TextStyle
                          }
                        }
                    ]
                  }
              ]
            }
        ]
      }
  ]
}
DEF CnvText Script {
  eventIn      SFVec3f	position
  eventIn      SFRotation	orientation
  eventOut     MFString	positionText
  eventOut     MFString	orientationText

	url [ "ProximitySensorScriptConvertText.js" "http://X3dGraphics.com/examples/X3dForWebAuthors/Chapter12EnvironmentSensorSound/ProximitySensorScriptConvertText.js"
 ]
}
ROUTE HereIAm.orientation_changed TO HUD.rotation
ROUTE HereIAm.position_changed TO HUD.translation
ROUTE HereIAm.position_changed TO CnvText.position
ROUTE HereIAm.orientation_changed TO CnvText.orientation
ROUTE CnvText.positionText TO TopTextLine.string
ROUTE CnvText.orientationText TO BottomTextLine.string
