#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "KelpExamplesNoBase.x3d"
# META "description" "Creates 3 instances of Kelp that sway."
# META "creator" "Joseph Cannon, Dan DeVos, Don Brutzman"
# META "created" "25 September 1998"
# META "modified" "20 October 2019"
# META "reference" "http://faculty.nps.edu/brutzman/kelp"
# META "reference" "KelpForestDesignPaperWeb3dSymposiumFebruary2002.pdf"
# META "reference" "https://x3dgraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpForestDesignPaperWeb3dSymposiumFebruary2002.pdf"
# META "reference" "https://x3dgraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/Teaching3d-KelpForestCaseStudy.pdf"
# META "accessRights" "All content has permissions for free use. Please provide credit to the Naval Postgraduate School (NPS) Modeling Virtual Environments and Simulation (MOVES) Institute."
# META "identifier" "https://x3dgraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpExamplesNoBase.x3d"
# META "generator" "Vrml97ToX3dNist, http://ovrt.nist.gov/v2_x3d.html"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

NavigationInfo { type [ "EXAMINE" "ANY" ] } ###  Default X3D NavigationInfo

WorldInfo {
  title "KelpExamplesNoBase.x3d"
}
EXTERNPROTO Kelp [ 
  # [appinfo] Kelp strands and bulbs with no base

  exposedField SFVec3f	frontBladeSize
  exposedField SFVec3f	rearSideBladeHeight
  exposedField SFVec3f	frontSideBladeHeight
  exposedField SFVec3f	rightBladeSize
  exposedField SFVec3f	rightSideBladeHeight
  exposedField SFVec3f	leftBladeSize
  exposedField SFVec3f	rearBladeSize
  exposedField SFVec3f	leftSideBladeHeight
][
"KelpPrototype.x3d#Kelp" "https://x3dgraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpPrototype.x3d#Kelp" "KelpPrototype.wrl#Kelp" "https://x3dgraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpPrototype.wrl#Kelp"
 ]
Group {
  children [
      DEF KelpTransform0 Transform {
        scale 0.3 0.3 0.3
        children [
             Kelp {
            }
        ]
      }
      DEF KelpTransform1 Transform {
        rotation 0.0 1.0 0.0 5.5
        scale 0.29 0.29 0.29
        translation -0.5 0.0 0.0
        children [
             Kelp {
              rearSideBladeHeight  0.0 15.0 0.0
              frontBladeSize  0.4 0.4 0.4
              frontSideBladeHeight  0.0 23.0 0.0
              rightBladeSize  0.4 0.4 0.4
              rightSideBladeHeight  0.0 20.0 0.0
              leftBladeSize  0.7 0.7 0.7
              rearBladeSize  0.7 0.7 0.7
              leftSideBladeHeight  0.0 6.0 0.0
            }
        ]
      }
      DEF KelpTransform2 Transform {
        scale 0.3 0.3 0.3
        translation 0.5 0.0 0.5
        children [
             Kelp {
              rearSideBladeHeight  0.0 18.0 0.0
              frontBladeSize  0.7 0.7 0.7
              frontSideBladeHeight  0.0 8.0 0.0
              rightBladeSize  0.7 0.7 0.7
              rightSideBladeHeight  0.0 16.0 0.0
              leftBladeSize  0.7 0.7 0.7
              rearBladeSize  0.4 0.4 0.4
              leftSideBladeHeight  0.0 13.0 0.0
            }
        ]
      }
  ]
}
Group {
  children [
      # ====================
      DEF Clock0 TimeSensor {
        cycleInterval 5.5
        loop TRUE
      }
      # ====================
      DEF KelpPath0 OrientationInterpolator {
        key [ 0.0 0.05 0.25 0.45 0.5 0.55 0.75 0.95 1.0 ]
        keyValue [ 0 0 1 0.1 0 0 1 0.095 0 0 1 0 0 0 1 -0.095 0 0 1 -0.1 0 0 1 -0.095 0 0 1 0 0 0 1 0.095 0 0 1 0.1 ]
      }
      # ====================
      DEF TimeDelay1 Script {
        eventIn      SFFloat	set_fraction
        eventOut     SFFloat	value_changed

	url [ "javascript: // ### X3D Browser.print() not supported by all VRML97 viewers, instead simply using print()


function set_fraction (value, timestamp)
{
	delay = 0.25;
	delayedValue = value + (delay/5.5); // delay/interval, seconds
	if (delayedValue > 1) delayedValue--;
	value_changed = delayedValue;

//	printing ('TimeDelay1 value=' + value + ', value_changed=' + value_changed);
}

      
" ]
      }
      DEF KelpPath1 OrientationInterpolator {
        key [ 0.0 0.05 0.25 0.45 0.5 0.55 0.75 0.95 1.0 ]
        keyValue [ 0 0 1 0.1 0 0 1 0.095 0 0 1 0 0 0 1 -0.095 0 0 1 -0.1 0 0 1 -0.095 0 0 1 0 0 0 1 0.095 0 0 1 0.1 ]
      }
      # ====================
      DEF TimeDelay2 Script {
        eventIn      SFFloat	set_fraction
        eventOut     SFFloat	value_changed

	url [ "javascript: // ### X3D Browser.print() not supported by all VRML97 viewers, instead simply using print()


function set_fraction (value, timestamp)
{
	delay = 0.5;
	delayedValue = value + (delay/5.5); // delay/interval, seconds
	if (delayedValue > 1) delayedValue--;
	value_changed = delayedValue;

//	printing ('TimeDelay2 value=' + value + ', value_changed=' + value_changed);
}

      
" ]
      }
      DEF KelpPath2 OrientationInterpolator {
        key [ 0.0 0.05 0.25 0.45 0.5 0.55 0.75 0.95 1.0 ]
        keyValue [ 0 0 1 0.1 0 0 1 0.095 0 0 1 0 0 0 1 -0.095 0 0 1 -0.1 0 0 1 -0.095 0 0 1 0 0 0 1 0.095 0 0 1 0.1 ]
      }
  ]
ROUTE Clock0.fraction_changed TO KelpPath0.set_fraction
ROUTE KelpPath0.value_changed TO KelpTransform0.set_rotation
ROUTE Clock0.fraction_changed TO TimeDelay1.set_fraction
ROUTE TimeDelay1.value_changed TO KelpPath1.set_fraction
ROUTE KelpPath1.value_changed TO KelpTransform1.set_rotation
ROUTE Clock0.fraction_changed TO TimeDelay2.set_fraction
ROUTE TimeDelay2.value_changed TO KelpPath2.set_fraction
ROUTE KelpPath2.value_changed TO KelpTransform2.set_rotation
}
