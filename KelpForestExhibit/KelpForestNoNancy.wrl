#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "KelpForestMain.x3d"
# META "description" "This is the main entry to the Kelp Forest that loads all of the other components as Inline scenes."
# META "creator" "Don Brutzman"
# META "created" "1 June 1998"
# META "modified" "20 October 2019"
# META "reference" "http://faculty.nps.edu/brutzman/kelp"
# META "reference" "http://faculty.nps.edu/brutzman/kelp/KelpForestDesignPaper.pdf"
# META "subject" "Kelp Forest 3D models"
# META "accessRights" "All content has permissions for free use. Please provide credit to the Naval Postgraduate School (NPS) Modeling Virtual Environments and Simulation (MOVES) Institute."
# META "identifier" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpForestMain.x3d"
# META "generator" "X3D-Edit 3.3, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

WorldInfo {
  info [ "Model of the Monterey Bay Aquarium Kelp Forest" "DTG of original update: 111500Jun98" "Created by Naval Postgraduate School students under the supervision of Don Brutzman" "Feel free to copy anything you wish - just give credit where it is due" "http://faculty.nps.edu/brutzman/kelp" ]
  title "NPS Virtual Kelp Forest Exhibit"
}
NavigationInfo {
  speed 3.0
  type [ "EXAMINE" "FLY" "WALK" "ANY"  ] 
}
EXTERNPROTO ViewPositionOrientation [ 
  exposedField SFBool	enabled
  field        SFBool	traceEnabled
  eventIn      SFBool	set_traceEnabled
  eventOut     SFVec3f	position_changed
  eventOut     SFRotation	orientation_changed
  eventOut     MFString	outputViewpointString
][
"../../Savage/Tools/Authoring/ViewPositionOrientationPrototype.x3d#ViewPositionOrientation" "https://savage.nps.edu/Savage/Tools/Authoring/ViewPositionOrientationPrototype.x3d#ViewPositionOrientation" "../../Savage/Tools/Authoring/ViewPositionOrientationPrototype.wrl#ViewPositionOrientation" "https://savage.nps.edu/Savage/Tools/Authoring/ViewPositionOrientationPrototype.wrl#ViewPositionOrientation"
 ]
 ViewPositionOrientation {
  enabled  FALSE
}
EXTERNPROTO WaypointInterpolator [ 
  # [appinfo] Reads waypoints and legSpeeds/legDurations/defaultSpeed to provide a customizable position/orientation interpolator.

  # Priority of use: legSpeeds (m/sec), legDurations (seconds), defaultSpeed (m/sec)
  field        SFString	description    # [appinfo] Short description of what is animated by this WaypointInterpolator.

  field        MFVec3f	waypoints    # [appinfo] Waypoints being traversed with interpolation of intermediate positions and orientations.

  eventIn      SFVec3f	add_waypoint    # [appinfo] Add another single waypoint to array of waypoints recalculate interpolator values.

  eventIn      MFVec3f	set_waypoints    # [appinfo] Replace all waypoints recalculate interpolator values.

  field        SFBool	pitchUpDownForVerticalWaypoints    # [appinfo] Whether to pitch child geometry (such as a vehicle) up or down to match vertical slope

  field        MFFloat	legSpeeds    # [appinfo] Units m/sec. If used, array lengths for legSpeeds and legDurations must be one less than number of waypoints.

  field        MFFloat	legDurations    # [appinfo] Units in seconds. If used, array lengths for legSpeeds and legDurations must be one less than number of waypoints.

  field        SFFloat	defaultSpeed    # [appinfo] Units m/sec.

  field        SFFloat	turningRate    # [appinfo] turningRate (degrees/second) also determines standoff distance prior to waypoint where turn commences. If 0 turns are instantaneous.

  eventOut     SFTime	totalDuration    # [appinfo] Output calculation summing all leg durations, useful for setting TimeSensor cycleInterval. Units in seconds.

  # interpolation fields
  eventIn      SFFloat	set_fraction    # [appinfo] exposed PositionInterpolator and OrientationInterpolator setting

  eventOut     SFVec3f	position_changed    # [appinfo] exposed PositionInterpolator setting

  eventOut     SFRotation	orientation_changed    # [appinfo] exposed OrientationInterpolator setting

  # display-related fields
  exposedField SFColor	lineColor    # [appinfo] default color for non-active line segments

  exposedField SFColor	highlightSegmentColor    # [appinfo] highlightSegmentColors must contain two color values for each endpoint of the highlight segment.

  exposedField SFFloat	transparency    # [appinfo] 1.0 is completely transparent, 0.0 is completely opaque.

  field        SFString	labelDisplayMode    # [appinfo] allowed values: none; waypoints (produce labels at each waypoint); or interpolation (produce single moving label at interpolator time course speed location)

  field        SFString	heightLabel    # [appinfo] allowed values: altitude depth (negate Y value) none

  field        SFVec3f	labelOffset    # [appinfo] heightLabel relative location

  field        SFFloat	labelFontSize    # [appinfo] heightLabel text size

  field        SFColor	labelColor    # [appinfo] heightLabel text color

  field        SFBool	traceEnabled    # [appinfo] enable console output to trace script computations and prototype progress

  field        SFBool	outputInitializationComputations    # [appinfo] Output the number of waypoints totalDistance and totalDuration to console upon initialization

  exposedField SFColor	verticalDropLineColor    # [appinfo] default color for vertical drop-line segments

  exposedField SFFloat	verticalDropLineTransparency    # [appinfo] 1.0 is completely transparent, 0.0 is completely opaque.

][
"../../Savage/Tools/Animation/WaypointInterpolatorPrototype.x3d#WaypointInterpolator" "https://savage.nps.edu/Savage/Tools/Animation/WaypointInterpolatorPrototype.x3d#WaypointInterpolator" "../../Savage/Tools/Animation/WaypointInterpolatorPrototype.wrl#WaypointInterpolator" "https://savage.nps.edu/Savage/Tools/Animation/WaypointInterpolatorPrototype.wrl#WaypointInterpolator"
 ]
DEF Viewpoints Group {
  children [
      Viewpoint {
        description "Kelp Forest Monterey Bay Aquarium"
        position 0.0 -5.0 45.0
      }
      Viewpoint {
        description "Side Windows"
        fieldOfView 0.5
        orientation 0.0 1.0 0.0 0.9
        position 25.0 -4.0 15.0
      }
      Viewpoint {
        description "Star Fish"
        orientation 0.0 1.0 0.0 1.25
        position 14.0 -5.75 1.0
      }
      Viewpoint {
        description "Inside Tank"
        orientation 0.0 1.0 0.0 3.14
        position 0.0 -5.0 -7.0
      }
      Viewpoint {
        description "Top floor"
        fieldOfView 1.04719
        orientation -0.3 1.0 0.3 1.57079
        position 12.5 5.0 -2.0
      }
      Viewpoint {
        description "Bird's Eye View"
        orientation 1.0 0.0 0.0 -1.57
        position 0.0 19.0 -3.5
      }
      Viewpoint {
        description "Pump House"
        fieldOfView 0.6
        orientation 0.0 1.0 0.0 1.3
        position -5.0 1.0 0.0
      }
  ]
}
DEF Root Group {
  children [
      Background {
        groundAngle [ 1.309 1.5707 ]
        groundColor [ 0.1 0.1 0.0 0.4 0.25 0.2 0.6 0.6 0.6 ]
        skyAngle [ 1.309 1.5707 ]
        skyColor [ 0.0 0.5 1.0 0.0 0.0 1.0 0.0 0.0 1.0 ]
      }
      Inline {
        url [ "IntroductionMessage.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/IntroductionMessage.x3d" "IntroductionMessage.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/IntroductionMessage.wrl" ]
      }
      Collision {
        collide FALSE
 children [
          Transform {
            children [
                Inline {
                  url [ "SharkLeftyLocale.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SharkLeftyLocale.x3d" "SharkLeftyLocale.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SharkLeftyLocale.wrl" ]
                }
            ]
          }
          Transform {
            children [
                Inline {
                  url [ "SharkLucyLocale.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SharkLucyLocale.x3d" "SharkLucyLocale.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SharkLucyLocale.wrl" ]
                }
            ]
          }
          Transform {
            children [
                Inline {
                  url [ "KelpTank.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpTank.x3d" "KelpTank.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpTank.wrl" ]
                }
            ]
          }
          Transform {
            scale 0.54 0.75 0.52
            translation 0.3 -2.88 7.3
            children [
                Inline {
                  url [ "RockFloor.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/RockFloor.x3d" "RockFloor.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/RockFloor.wrl" ]
                }
            ]
          }
          DEF K2_LOCALE Transform {
            translation -4.0 0.0 1.0
            children [
                DEF K2_MIDWATER Transform {
                  scale 0.2 0.2 0.2
                  translation -1.0 -4.0 -4.0
                  children [
                      Inline {
                        url [ "SardineSchool.wrz" "SardineSchool/SardineSchool.wrz" "SardineSchool.x3d" "SardineSchool/SardineSchool.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SardineSchool.x3d" "SardineSchool.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SardineSchool.wrl" ]
                      }
                  ]
                }
                DEF K2_FLOOR Transform {
                  rotation 0.0 1.0 0.0 0.44
                  scale 0.5 0.9 0.5
                  translation -1.9 -8.5 -1.5
                  children [
                      DEF KelpExamplesNoBase Inline {
                        url [ "KelpExamplesNoBase.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpExamplesNoBase.x3d" "KelpExamplesNoBase.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpExamplesNoBase.wrl" ]
                      }
                  ]
                }
            ]
          }
          DEF K4_LOCALE Transform {
            translation -2.5 0.0 -2.5
            children [
                DEF K4_MIDWATER Transform {
                  translation -10.0 -2.0 -2.0
                  children [
                      Inline {
                        url [ "HalfMoonGroup.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/HalfMoonGroup.x3d" "HalfMoonGroup.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/HalfMoonGroup.wrl" ]
                      }
                  ]
                }
                DEF K4_FLOOR Transform {
                  rotation 0.0 1.0 0.0 -0.3
                  scale 0.5 0.8 0.5
                  translation -1.5 -7.5 0.5
                  children [
                      USE KelpExamplesNoBase
                  ]
                }
            ]
          }
          DEF K7_LOCALE Transform {
            translation 2.0 0.0 -2.5
            children [
                DEF K7_MIDWATER Transform {
                  scale 0.25 0.25 0.25
                  translation 2.0 -4.0 0.0
                  children [
                      Inline {
                        url [ "RubberLipGroup.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/RubberLipGroup.x3d" "RubberLipGroup.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/RubberLipGroup.wrl" ]
                      }
                  ]
                }
                DEF K7_FLOOR Transform {
                  scale 0.5 0.85 0.5
                  translation 0.0 -7.75 0.0
                  children [
                      USE KelpExamplesNoBase
                  ]
                }
            ]
          }
          DEF K10_LOCALE Transform {
            translation 7.0 0.0 2.0
            children [
                DEF K10_DEEP Transform {
                  translation 0.0 -5.0 0.0
                  children [
                      Inline {
                        url [ "StripedSurfPerch.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/StripedSurfPerch.x3d" "StripedSurfPerch.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/StripedSurfPerch.wrl" ]
                      }
                  ]
                }
                DEF K10_FLOOR Transform {
                  rotation 0.0 1.0 0.0 0.16
                  scale 0.5 0.75 0.5
                  translation -1.0 -7.0 -1.0
                  children [
                      USE KelpExamplesNoBase
                  ]
                }
            ]
          }
          DEF K11_LOCALE Transform {
            translation 8.0 0.0 -2.0
            children [
                DEF K11_MIDWATER Transform {
                  rotation 0.0 1.0 0.0 0.3
                  translation 2.19 -7.0 0.15
                  children [
                      Inline {
                        url [ "SeaStarSimple.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SeaStarSimple.x3d" "SeaStarSimple.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SeaStarSimple.wrl" ]
                      }
                  ]
                }
                DEF K11_DEEP Transform {
                  rotation 0.0 1.0 0.0 0.9
                  translation 1.0 -5.0 0.0
                  children [
                      Inline {
                        url [ "BlackSurfPerch.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/BlackSurfPerch.x3d" "BlackSurfPerch.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/BlackSurfPerch.wrl" ]
                      }
                  ]
                }
                DEF K11_FLOOR Transform {
                  rotation 0.0 1.0 0.0 0.3
                  scale 0.5 0.75 0.5
                  translation -0.3 -7.0 0.0
                  children [
                      USE KelpExamplesNoBase
                  ]
                }
                Transform {
                  translation 1.3 -5.0 3.0
                  children [
                      Inline {
                        url [ "SeaStarGroup.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SeaStarGroup.x3d" "SeaStarGroup.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/SeaStarGroup.wrl" ]
                      }
                  ]
                }
            ]
          }
          DEF R2_LOCALE Transform {
            translation -1.0 0.0 -1.0
            children [
                DEF R2_MIDWATER Transform {
                  translation -1.0 -6.0 -2.0
                  children [
                      Inline {
                        url [ "BlueRockFish.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/BlueRockFish.x3d" "BlueRockFish.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/BlueRockFish.wrl" ]
                      }
                  ]
                }
                DEF R2_DEEP Transform {
                  translation 1.0 -6.5 -1.0
                  children [
                      Inline {
                        url [ "KelpSurfPerch.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpSurfPerch.x3d" "KelpSurfPerch.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpSurfPerch.wrl" ]
                      }
                  ]
                }
            ]
          }
          DEF R3_LOCALE Transform {
            translation 3.0 0.0 -4.0
            children [
                DEF R3_MIDWATER Transform {
                  translation 0.0 -6.0 0.0
                  children [
                      Inline {
                        url [ "Garibaldi.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/Garibaldi.x3d" "Garibaldi.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/Garibaldi.wrl" ]
                      }
                  ]
                }
            ]
          }
          DEF R5_LOCALE Transform {
            translation 8.0 0.0 -2.0
            children [
                DEF R5_SHALLOW Transform {
                  translation -2.0 -2.0 0.0
                  children [
                      Inline {
                        url [ "KelpBass.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpBass.x3d" "KelpBass.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/KelpForestExhibit/KelpBass.wrl" ]
                      }
                  ]
                }
            ]
          }
          DEF WAVE_CLOCK TimeSensor {
            cycleInterval 5.5
            enabled FALSE
            loop TRUE
          }
          DEF LEFT_SHALLOW_WAVE PositionInterpolator {
            key [ 0.0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1.0 ]
            keyValue [ 0.0 0.0 0.0 0.056 -0.085 0.0 0.08 -0.12 0.0 0.056 -0.085 0.0 0.0 0.0 0.0 -0.056 0.085 0.0 -0.08 0.12 0.0 -0.056 0.085 0.0 0.0 0.0 0.0 ]
          }
 ### Warning:  no ROUTE found for PositionInterpolator input
 ### Warning:  no ROUTE found for PositionInterpolator output
          DEF LEFT_DEEP_WAVE PositionInterpolator {
            key [ 0.0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1.0 ]
            keyValue [ 0.0 0.0 0.0 0.035 -0.035 0.0 0.05 -0.05 0.0 0.035 -0.035 0.0 0.0 0.0 0.0 -0.035 0.035 0.0 -0.05 0.05 0.0 -0.035 0.035 0.0 0.0 0.0 0.0 ]
          }
 ### Warning:  no ROUTE found for PositionInterpolator input
          DEF CENTER_WAVE PositionInterpolator {
            key [ 0.0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1.0 ]
            keyValue [ 0.0 0.0 0.0 0.106 0.0 0.0 0.15 0.0 0.0 0.106 0.0 0.0 0.0 0.0 0.0 -0.106 0.0 0.0 -0.15 0.0 0.0 -0.106 0.0 0.0 0.0 0.0 0.0 ]
          }
          DEF RIGHT_SHALLOW_WAVE PositionInterpolator {
            key [ 0.0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1.0 ]
            keyValue [ 0.0 0.0 0.0 0.056 0.085 0.0 0.08 0.12 0.0 0.056 0.085 0.0 0.0 0.0 0.0 -0.056 -0.085 0.0 -0.08 -0.12 0.0 -0.056 -0.085 0.0 0.0 0.0 0.0 ]
          }
 ### Warning:  no ROUTE found for PositionInterpolator input
          DEF RIGHT_DEEP_WAVE PositionInterpolator {
            key [ 0.0 0.125 0.25 0.375 0.5 0.625 0.75 0.875 1.0 ]
            keyValue [ 0.0 0.0 0.0 0.035 0.035 0.0 0.05 0.05 0.0 0.035 0.035 0.0 0.0 0.0 0.0 -0.035 -0.035 0.0 -0.05 -0.05 0.0 -0.035 -0.035 0.0 0.0 0.0 0.0 ]
          }
 ### Warning:  no ROUTE found for PositionInterpolator input
 ]
      }
  ]
}
ROUTE WAVE_CLOCK.fraction_changed TO CENTER_WAVE.set_fraction
ROUTE CENTER_WAVE.value_changed TO K7_MIDWATER.set_translation
ROUTE RIGHT_DEEP_WAVE.value_changed TO K2_MIDWATER.set_translation
ROUTE CENTER_WAVE.value_changed TO K4_MIDWATER.set_translation
ROUTE LEFT_DEEP_WAVE.value_changed TO K10_DEEP.set_translation
ROUTE LEFT_DEEP_WAVE.value_changed TO K11_DEEP.set_translation
ROUTE RIGHT_SHALLOW_WAVE.value_changed TO R2_MIDWATER.set_translation
ROUTE RIGHT_DEEP_WAVE.value_changed TO R2_DEEP.set_translation
ROUTE CENTER_WAVE.value_changed TO R3_MIDWATER.set_translation
ROUTE RIGHT_SHALLOW_WAVE.value_changed TO R5_SHALLOW.set_translation
DEF MasterClock TimeSensor {
  loop TRUE
}
 ### Warning:  no ROUTE found for TimeSensor output
