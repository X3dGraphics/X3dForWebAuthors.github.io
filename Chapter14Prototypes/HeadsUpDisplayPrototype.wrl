#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "HeadsUpDisplayPrototype.x3d"
# META "description" "Reusable Prototype definition that applies a ProximitySensor for a simple HeadsUpDisplay (HUD) prototype that maintains a stable position for its children on the screen."
# META "creator" "Leonard Daly and Don Brutzman"
# META "created" "15 July 2006"
# META "modified" "20 October 2019"
# META "reference" "HeadsUpDisplayExample.x3d"
# META "reference" "https://X3dGraphics.com"
# META "reference" "https://www.web3d.org/x3d/content/examples/X3dResources.html"
# META "rights" "Copyright 2006, Daly Realism and Don Brutzman"
# META "subject" "X3D book, X3D graphics, X3D-Edit, http://www.x3dGraphics.com"
# META "identifier" "https://X3dGraphics.com/examples/X3dForWebAuthors/Chapter14Prototypes/HeadsUpDisplayPrototype.x3d"
# META "generator" "X3D-Edit 3.3, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

NavigationInfo { type [ "EXAMINE" "ANY" ] } ###  Default X3D NavigationInfo

WorldInfo {
  title "HeadsUpDisplayPrototype.x3d"
}
PROTO HeadsUpDisplay [
  # [appinfo] Heads-up display (HUD) keeps child geometry aligned on screen in a consistent location

  exposedField SFVec3f	screenOffset 0 0 -5    # [appinfo] offset position for HUD relative to current view location, default 0 0 -5

  exposedField MFNode	children [ ]    # [appinfo] X3D content positioned at HUD offset

    # initialization nodes (if any) go here

  eventOut     SFVec3f	position_changed    # [appinfo] HUD position update (in world coordinates) relative to original location

  eventOut     SFRotation	orientation_changed    # [appinfo] HUD orientation update relative to original location

] {
  Group {
    children [
        DEF HudContainer Transform {
          children [
              Transform {
                                  translation IS screenOffset
                children [
                    Group {
                                              children IS children
                    }
                ]
              }
          ]
        }
        DEF HereIAm ProximitySensor {
          size 10000000 10000000 10000000
                      position_changed IS position_changed
            orientation_changed IS orientation_changed
        }
    ]
  ROUTE HereIAm.orientation_changed TO HudContainer.rotation
  ROUTE HereIAm.position_changed TO HudContainer.translation
  }
}
Viewpoint {
  description "Heads-up display (HUD)"
}
# ProtoDeclare is the "cookie cutter" template, ProtoInstance creates an actual occurrence
# Example use is in separate scene
Anchor {
  description "HeadsUpDisplay Example"
  parameter [ "target=_blank" ]
  url [ "HeadsUpDisplayExample.x3d" "https://X3dGraphics.com/examples/X3dForWebAuthors/Chapter14Prototypes/HeadsUpDisplayExample.x3d" "HeadsUpDisplayExample.wrl" "https://X3dGraphics.com/examples/X3dForWebAuthors/Chapter14Prototypes/HeadsUpDisplayExample.wrl" ]
  children [
      Shape {
        appearance Appearance {
          material Material {
            diffuseColor 0.8 0.4 0
          }
        }
        geometry Text {
          string [ "HeadsUpDisplayExample.x3d" "is a Prototype declaration file." "" "For an example scene using this node," "click this text and view" "HeadsUpDisplayExample.x3d" ]
          fontStyle FontStyle {
            justify [ "MIDDLE" "MIDDLE"  ] 
            size 0.8
          }
        }
      }
  ]
}
