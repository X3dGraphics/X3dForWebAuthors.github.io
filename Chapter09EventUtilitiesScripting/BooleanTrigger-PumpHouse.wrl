#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# http://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: SAXON 8.7 from Saxonica

# [X3D] VRML V3.1 utf8
# PROFILE Immersive
# [X3D] version=3.1
# [X3D] noNamespaceSchemaLocation=http://www.web3d.org/specifications/x3d-3.0.xsd
# [head]

# META "title" "BooleanTrigger-PumpHouse.x3d"
# META "description" "A BooleanTrigger node controls the pump house animation."
# META "description" "Positive-displacement cylinder pump to emulate breakers surge, designed and built by David Packard."
# META "authors" "Todd Gagnon and Mark A. Boyd"
# META "translator" "Xeena VRML importer"
# META "created" "8 June 1998"
# META "imported" "20 December 2002"
# META "modified" "21 December 2002, 11 March 2006"
# META "modified" "2006-06-10 (10 June 2006)"
# META "reference" "KelpTank.x3d"
# META "identifier" "http://www.web3d.org/x3d/content/examples/KelpForestExhibit/PumpHouse.x3d"
 ### Warning:  <meta name='identifier'/> title doesn't match <meta name='title' content='BooleanTrigger-PumpHouse.x3d'/>
# META "generator" "X3D-Edit, http://www.web3d.org/x3d/content/README.X3D-Edit.html"
# META "generator" "Vrml97ToX3dNist, http://ovrt.nist.gov/v2_x3d.html"
# META "license" "../license.html"


EXTERNPROTO BooleanTrigger [
  # [appinfo] Convert time events to boolean true events.
  eventIn  SFTime set_triggerTime # [appinfo] set_triggerTime provides input time event, typical event sent is TouchSensor touchTime.
  eventOut SFBool triggerTrue     # [appinfo] triggerTrue outputs a true value whenever a triggerTime event is received.
][
      "EventUtilityPrototypes.wrl#BooleanTrigger"
      "/www.web3d.org/x3d/content/examples/Basic/development/EventUtilityPrototypes.wrl#BooleanTrigger"
    "c:/www.web3d.org/x3d/content/examples/Basic/development/EventUtilityPrototypes.wrl#BooleanTrigger"
"http://www.web3d.org/x3d/content/examples/Basic/development/EventUtilityPrototypes.wrl#BooleanTrigger"
      "EventUtilityPrototypes.x3d#BooleanTrigger"
      "/www.web3d.org/x3d/content/examples/Basic/development/EventUtilityPrototypes.x3d#BooleanTrigger"
    "c:/www.web3d.org/x3d/content/examples/Basic/development/EventUtilityPrototypes.x3d#BooleanTrigger"
"http://www.web3d.org/x3d/content/examples/Basic/development/EventUtilityPrototypes.x3d#BooleanTrigger"
# CosmoPlayer/Netscape 4.8 url bug workaround:
#"file:///c|\www.web3d.org\x3d\content\examples\development\EventUtilityPrototypes.wrl#BooleanTrigger"
 ]

    
# [Scene] ========== ========== ==========

WorldInfo {
  info [ "DTG of last update: 081200Jun98 Added: Updated: cycleInterval to 5.5 Modeled by: Todd Gagnon and Mark A. Boyd" ]
  title "pumpHouse1.4.wrl"
}
EXTERNPROTO WhereAmI [ ][
"../Chapter14-Prototypes/WhereAmI.x3d#WhereAmI" "http://www.X3dGraphics.com/examples/X3dForWebAuthors/Chapter14-Prototypes/WhereAmI.x3d#WhereAmI" "../Chapter14-Prototypes/WhereAmI.wrl#WhereAmI" "http://www.X3dGraphics.com/examples/X3dForWebAuthors/Chapter14-Prototypes/WhereAmI.wrl#WhereAmI"
 ]
 WhereAmI {
}
Background {
  skyColor [ 1 1 1 ]
}
NavigationInfo {
  type [ "ANY"  ] 
   # transitionType [ "ANIMATE"  ] 
}
Viewpoint {
  description "Book View"
  orientation -0.969 0.239 0.056 0.13
  position 1.66 1.34 5.95
}
Group {
  children [
      Transform {
        scale 0.91 0.6 0.3
        translation 0.8 -0.65 0.5
        children [
            Shape {
              appearance Appearance {
                material Material {
                  diffuseColor 0.749 0.694 0.651
                }
              }
              geometry Cylinder {
                bottom FALSE
                top FALSE
              }
            }
        ]
      }
      Group {
        children [
            Shape {
              appearance DEF pumpHouse Appearance {
                material Material {
                  diffuseColor 0.82 0.78 0.74
                }
              }
              geometry IndexedFaceSet {
                coordIndex [ 0 1 5 4 -1 5 1 2 6 -1 6 2 3 7 -1 3 0 4 7 -1 1 12 13 2 -1 2 13 14 -1 12 15 16 13 -1 15 0 3 16 -1 16 3 17 -1 9 5 6 10 -1 8 9 10 11 -1 4 8 11 7 -1 4 5 9 8 -1 11 10 6 7 -1 3 2 14 17 -1 13 16 17 14 -1 ]
                coord Coordinate {
                  point [ 0.0 0.0 0.0 2.0 0.0 0.0 2.0 1.75 0.0 0.0 1.75 0.0 0.625 0.75 0.0 1.0 0.75 0.0 1.0 1.6 0.0 0.625 1.6 0.0 0.625 0.75 -0.65 1.0 0.75 -0.65 1.0 1.6 -0.65 0.625 1.6 -0.65 2.0 0.0 -2.7 2.0 1.75 -2.7 2.0 2.5 -1.0 0.0 0.0 -2.7 0.0 1.75 -2.7 0.0 2.5 -1.0 ]
                }
              }
            }
            DEF RunPump TouchSensor {
            }
 ### Hint:  need description attribute, such as <TouchSensor description='touch to activate'/>
        ]
      }
  ]
}
Group {
  children [
      Transform {
        scale 0.5 0.5 0.5
        translation 1.0 1.1 -1.5
        children [
            DEF PISTON Transform {
              children [
                  Transform {
                    scale 1.8 1.2 0.6
                    translation 0.0 -0.2 0.0
                    children [
                        Shape {
                          appearance Appearance {
                            material Material {
                              diffuseColor 0.427 0.427 0.42
                            }
                          }
                          geometry Cylinder {
                            height 1.0
                            radius 0.98
                          }
                        }
                    ]
                  }
                  DEF CylinderRod Transform {
                    rotation 0.0 0.0 -1.0 0.523599
                    translation -0.25 0.75 0.0
                    children [
                        Shape {
                          appearance USE pumpHouse
                          geometry Cylinder {
                            height 1.0
                            radius 0.1
                          }
                        }
                    ]
                  }
                  Transform {
                    rotation 0.0 0.0 1.0 1.047198
                    translation 1.0 0.6 0.0
                    children [
                        USE CylinderRod
                    ]
                  }
                  Transform {
                    translation 0.0 1.2 0.0
                    children [
                        Shape {
                          appearance USE pumpHouse
                          geometry Sphere {
                            radius 0.15
                          }
                        }
                    ]
                  }
                  DEF ROCKERARM1 Transform {
                    center 0.0 -0.4 0.0
                    children [
                        Shape {
                          appearance USE pumpHouse
                          geometry Cylinder {
                            height 1.8
                            radius 0.1
                          }
                        }
                        Transform {
                          translation 0.0 0.95 0.0
                          children [
                              Shape {
                                appearance USE pumpHouse
                                geometry Sphere {
                                  radius 0.15
                                }
                              }
                          ]
                        }
                        DEF ROCKER1Path PositionInterpolator {
                          key [ 0.0 0.3 0.32 0.5 0.75 1.0 ]
                          keyValue [ 0.0 2.0 -0.25 0.0 1.8 -0.35 0.0 1.8 -0.35 0.0 2.0 -0.25 0.0 2.0 -0.12 0.0 2.0 -0.25 ]
                        }
                        DEF ROCKER1Rotation OrientationInterpolator {
                          key [ 0.0 0.3 0.32 0.5 0.75 1.0 ]
                          keyValue [ -1.0 0.0 0.0 0.523599 -1.0 0.0 0.0 1.0471976 -1.0 0.0 0.0 1.0471976 -1.0 0.0 0.0 0.523599 -1.0 0.0 0.0 0.2617994 -1.0 0.0 0.0 0.523599 ]
                        }
                    ]
                  }
                  DEF ROCKERARM2 Transform {
                    center 0.0 0.7 0.0
                    children [
                        Shape {
                          appearance USE pumpHouse
                          geometry Cylinder {
                            height 1.8
                            radius 0.1
                          }
                        }
                        Transform {
                          translation 0.0 -0.95 0.0
                          children [
                              Shape {
                                appearance USE pumpHouse
                                geometry Sphere {
                                  radius 0.15
                                }
                              }
                          ]
                        }
                        DEF ROCKER2Path PositionInterpolator {
                          key [ 0.0 0.3 0.32 0.5 0.75 1.0 ]
                          keyValue [ 0.0 1.95 -1.0 0.0 1.2 -1.6 0.0 1.2 -1.6 0.0 1.95 -1.0 0.0 2.2 -0.65 0.0 1.95 -1.0 ]
                        }
                        DEF ROCKER2Rotation OrientationInterpolator {
                          key [ 0.0 0.3 0.32 0.5 0.75 1.0 ]
                          keyValue [ 1.0 0.0 0.0 0.523599 1.0 0.0 0.0 0.4 1.0 0.0 0.0 0.4 1.0 0.0 0.0 0.523599 1.0 0.0 0.0 1.570796 1.0 0.0 0.0 0.523599 ]
                        }
                    ]
                  }
              ]
            }
            DEF PISTONClock TimeSensor {
              cycleInterval 5.5
              enabled FALSE
              loop TRUE
            }
            DEF PISTONPath PositionInterpolator {
              key [ 0.0 0.3 0.32 0.5 0.75 1.0 ]
              keyValue [ -0.4 -2.3 4.0 -0.4 -1.5 4.0 -0.4 -1.5 4.0 -0.4 -2.3 4.0 -0.4 -3.3 4.0 -0.4 -2.3 4.0 ]
            }
            DEF Filter BooleanTrigger {
            }
        ]
      }
  ]
}
ROUTE RunPump.touchTime TO Filter.set_triggerTime
ROUTE Filter.triggerTrue TO PISTONClock.enabled
ROUTE PISTONClock.fraction_changed TO PISTONPath.set_fraction
ROUTE PISTONPath.value_changed TO PISTON.set_translation
ROUTE PISTONClock.fraction_changed TO ROCKER1Path.set_fraction
ROUTE ROCKER1Path.value_changed TO ROCKERARM1.set_translation
ROUTE PISTONClock.fraction_changed TO ROCKER1Rotation.set_fraction
ROUTE ROCKER1Rotation.value_changed TO ROCKERARM1.set_rotation
ROUTE PISTONClock.fraction_changed TO ROCKER2Path.set_fraction
ROUTE ROCKER2Path.value_changed TO ROCKERARM2.set_translation
ROUTE PISTONClock.fraction_changed TO ROCKER2Rotation.set_fraction
ROUTE ROCKER2Rotation.value_changed TO ROCKERARM2.set_rotation
